# 应用样式设计指南

## 1. 概述

本指南描述了整个应用的设计原则、样式规范和最佳实践。它为开发人员、设计师和内容创作者提供了一个统一的参考框架，确保应用在视觉和交互上保持一致性和专业性。

## 2. 设计系统

### 2.1 设计原则

#### 2.1.1 视觉层次
- **清晰的信息层级**：通过颜色、大小、间距和排版建立明确的视觉优先级
- **一致的视觉语言**：所有组件和页面使用统一的设计语言
- **呼吸感**：适当的留白让界面不拥挤，提高可读性
- **平衡**：元素分布均匀，视觉重量平衡

#### 2.1.2 用户体验
- **直观性**：界面设计符合用户预期，操作流程自然
- **反馈机制**：所有用户操作都应得到明确的视觉反馈
- **性能优先**：动画和过渡效果应流畅且不影响性能
- **可访问性**：确保应用对所有用户（包括残障用户）友好

#### 2.1.3 开发效率
- **组件化设计**：将UI拆分为可复用的组件
- **样式复用**：使用设计系统变量和工具类减少重复代码
- **清晰的文档**：为所有组件和样式提供详细文档
- **可维护性**：代码结构清晰，易于理解和修改

### 2.2 颜色系统

#### 2.2.1 主色调
| 颜色名称 | Tailwind 类 | 用途 |
|---------|------------|------|
| 蓝色 | `bg-blue-600` `text-blue-600` | 主要行动按钮、链接、用户消息 |
| 绿色 | `bg-green-600` `text-green-600` | 成功状态、积极反馈 |
| 红色 | `bg-red-600` `text-red-600` | 错误状态、停止按钮 |
| 黄色 | `bg-amber-600` `text-amber-600` | 警告状态、思考过程 |
| 紫色 | `bg-purple-600` `text-purple-600` | 次要行动、特殊功能 |

#### 2.2.2 中性色
| 颜色名称 | Tailwind 类（浅色模式） | Tailwind 类（深色模式） | 用途 |
|---------|------------------------|------------------------|------|
| 背景色 | `bg-white` | `bg-slate-900` | 页面背景 |
| 卡片背景 | `bg-white` | `bg-slate-800` | 卡片、容器背景 |
| 文本主色 | `text-slate-900` | `text-slate-100` | 主要文本 |
| 文本次色 | `text-slate-600` | `text-slate-400` | 次要文本、说明文字 |
| 边框色 | `border-slate-200` | `border-slate-700` | 边框、分隔线 |
| 悬停色 | `bg-slate-100` | `bg-slate-800/50` | 悬停状态背景 |

#### 2.2.3 功能色
| 功能 | 浅色模式 | 深色模式 | 示例 |
|------|----------|----------|------|
| 成功 | `bg-green-100 text-green-800` | `bg-green-900/30 text-green-300` | ✅ 操作成功提示 |
| 错误 | `bg-red-100 text-red-800` | `bg-red-900/30 text-red-300` | ❌ 表单验证错误 |
| 警告 | `bg-amber-100 text-amber-800` | `bg-amber-900/30 text-amber-300` | ⚠️ 警告信息 |
| 信息 | `bg-blue-100 text-blue-800` | `bg-blue-900/30 text-blue-300` | ℹ️ 信息提示 |

### 2.3 排版系统

#### 2.3.1 字体
- **主要字体**：系统默认无衬线字体（UI Sans）
- **代码字体**：等宽字体（Monaco, Menlo, Consolas等）

#### 2.3.2 字体大小
| 名称 | Tailwind 类 | 像素大小 | 用途 |
|------|------------|----------|------|
| 标题1 | `text-2xl` | 24px | 页面主标题 |
| 标题2 | `text-xl` | 20px | 章节标题 |
| 标题3 | `text-lg` | 18px | 卡片标题 |
| 正文 | `text-base` | 16px | 主要文本内容 |
| 小正文 | `text-sm` | 14px | 辅助文本、说明 |
| 微型文本 | `text-xs` | 12px | 标签、元数据 |

#### 2.3.3 行高与字重
- **行高**：正文使用 `leading-relaxed` (1.5em)，标题使用 `leading-tight` (1.25em)
- **字重**：
  - 标题：`font-semibold` 或 `font-bold`
  - 正文：`font-normal`
  - 强调文本：`font-medium`
  - 链接和按钮：`font-medium`

### 2.4 间距系统

#### 2.4.1 基础单位
- 使用4px作为基础间距单位
- 所有间距、边距、内边距均为4px的倍数

#### 2.4.2 间距量表
| 间距大小 | Tailwind 类 | 像素值 | 用途 |
|---------|------------|--------|------|
| 0 | `p-0` `m-0` | 0px | 重置间距 |
| 1 | `p-1` `m-1` | 4px | 小元素内边距 |
| 2 | `p-2` `m-2` | 8px | 小卡片内边距 |
| 3 | `p-3` `m-3` | 12px | 中等元素内边距 |
| 4 | `p-4` `m-4` | 16px | 标准卡片内边距 |
| 6 | `p-6` `m-6` | 24px | 页面内边距 |
| 8 | `p-8` `m-8` | 32px | 大容器内边距 |

#### 2.4.3 间距使用规则
- **组件间距**：不同组件之间使用 `gap-4` 或 `gap-6`
- **内容间距**：组件内部元素之间使用 `gap-2` 或 `gap-3`
- **页面边距**：页面内容与浏览器边缘至少保持 `p-4`
- **卡片间距**：卡片内容与边缘保持 `p-4`

### 2.5 圆角系统

| 圆角大小 | Tailwind 类 | 像素值 | 用途 |
|---------|------------|--------|------|
| 无圆角 | `rounded-none` | 0px | 矩形元素 |
| 小圆角 | `rounded-sm` | 2px | 输入框、小按钮 |
| 标准圆角 | `rounded-md` | 6px | 大部分组件、卡片 |
| 大圆角 | `rounded-lg` | 8px | 弹窗、模态框 |
| 超大圆角 | `rounded-xl` | 12px | 卡片、容器 |
| 圆形 | `rounded-full` | 50% | 头像、圆形按钮 |
| 特殊圆角 | `rounded-tl-sm` `rounded-tr-sm` | 自定义 | 聊天消息气泡 |

## 3. 布局系统

### 3.1 页面布局

#### 3.1.1 基础布局结构
```
┌─────────────────────────────────────────────────┐
│ 导航栏（固定顶部）                               │
├─────────────────────────────────────────────────┤
│                                                 │
│ 侧边栏（可选，固定左侧）                           │
│ ┌─────────────────────────────────────────────┐ │
│ │ 主内容区域                                   │ │
│ │                                             │ │
│ │ ┌─────────────────────────────────────────┐ │ │
│ │ │ 内容容器                                 │ │ │
│ │ │                                         │ │ │
│ │ └─────────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
└─────────────────────────────────────────────────┘
```

#### 3.1.2 响应式布局策略
- **移动优先**：设计从移动设备开始，然后扩展到更大的屏幕
- **断点设计**：
  - 小屏幕 (sm): < 640px
  - 中等屏幕 (md): 640px - 1024px
  - 大屏幕 (lg): 1024px - 1280px
  - 超大屏幕 (xl): > 1280px

#### 3.1.3 容器类
- **页面容器**：使用 `max-w-4xl mx-auto` 限制最大宽度并居中
- **弹性容器**：使用 `flex` 和 `grid` 布局创建灵活的内容结构
- **响应式容器**：根据屏幕尺寸调整布局方向和大小

### 3.2 网格系统

- 使用 Tailwind 的网格系统进行复杂布局
- 常用网格模式：
  - 单栏布局：`grid-cols-1`
  - 双栏布局：`grid-cols-1 md:grid-cols-2`
  - 三栏布局：`grid-cols-1 md:grid-cols-3`
  - 响应式侧边栏：`grid-cols-1 lg:grid-cols-[250px_1fr]`

## 4. 组件规范

### 4.1 按钮

#### 4.1.1 按钮类型
| 类型 | 样式 | 用途 |
|------|------|------|
| 主要按钮 | `bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md` | 主要行动点、表单提交 |
| 次要按钮 | `bg-white hover:bg-gray-50 text-blue-600 border border-blue-600 px-4 py-2 rounded-md` | 次要行动点 |
| 危险按钮 | `bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md` | 删除、取消等危险操作 |
| 幽灵按钮 | `text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-md` | 非主要操作、链接样式按钮 |
| 图标按钮 | `p-2 rounded-full hover:bg-gray-100` | 纯图标操作按钮 |

#### 4.1.2 按钮尺寸
| 尺寸 | 样式 |
|------|------|
| 小按钮 | `text-sm px-3 py-1` |
| 标准按钮 | `text-base px-4 py-2` |
| 大按钮 | `text-lg px-6 py-3` |

### 4.2 表单组件

#### 4.2.1 输入框
- **基础样式**：`border border-slate-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`
- **错误状态**：添加 `border-red-500` 类
- **禁用状态**：添加 `bg-gray-50 cursor-not-allowed opacity-75` 类
- **标签样式**：`block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1`

#### 4.2.2 文本域
- **基础样式**：与输入框相同，添加 `resize-none` 或 `resize-y`
- **高度控制**：使用 `min-h-[100px]` 或 `max-h-[300px]` 限制高度
- **自动调整高度**：实现自动调整高度功能以适应内容

#### 4.2.3 选择器
- **基础样式**：与输入框相同
- **下拉菜单**：使用原生 select 或自定义下拉组件

#### 4.2.4 复选框和单选框
- **基础样式**：自定义样式，保持与设计系统一致
- **标签对齐**：使用 `flex items-center gap-2` 确保标签与控件对齐

### 4.3 卡片组件

#### 4.3.1 基础卡片
```html
<div class="bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700">
  <div class="p-4">
    <!-- 卡片内容 -->
  </div>
</div>
```

#### 4.3.2 带标题的卡片
```html
<div class="bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700">
  <div class="p-4 border-b border-slate-200 dark:border-slate-700">
    <h3 class="text-lg font-semibold">卡片标题</h3>
  </div>
  <div class="p-4">
    <!-- 卡片内容 -->
  </div>
</div>
```

### 4.4 导航组件

#### 4.4.1 顶部导航
- **固定定位**：`fixed top-0 left-0 right-0 z-50`
- **背景样式**：`bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700`
- **内容容器**：`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`

#### 4.4.2 侧边导航
- **固定定位**：`fixed top-0 left-0 bottom-0 w-64 z-40`
- **背景样式**：`bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700`
- **激活状态**：使用 `bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400` 样式

### 4.5 聊天组件

#### 4.5.1 消息气泡
- **用户消息**：`bg-blue-600 text-white rounded-2xl rounded-tr-sm`
- **AI消息**：`bg-white dark:bg-slate-800 rounded-2xl rounded-tl-sm border border-slate-200 dark:border-slate-700`
- **消息间距**：`p-4 mb-4`

#### 4.5.2 输入区域
- **容器样式**：`bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4`
- **输入框样式**：`flex-1 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none`

### 4.6 图标系统

#### 4.6.1 图标库
- 使用 `lucide-react` 作为主要图标库
- 所有图标大小保持一致，通常为 `size-20` 或 `size-16`

#### 4.6.2 图标使用规则
- **一致性**：相同功能使用相同图标
- **清晰度**：确保图标在不同尺寸下都清晰可辨
- **颜色**：图标颜色应与上下文匹配，通常使用当前文本颜色或主题色
- **间距**：图标与文本之间应保持适当间距（通常为4-8px）

## 5. 页面类型样式

### 5.1 聊天页面
- **布局**：使用 `flex flex-col h-screen` 布局
- **消息区域**：`flex-1 overflow-y-auto p-4`
- **输入区域**：固定在底部，使用 `border-t` 分隔
- **滚动行为**：新消息自动滚动到底部

### 5.2 列表页面
- **布局**：使用 `grid` 或 `flex` 布局展示列表项
- **卡片样式**：使用标准卡片样式
- **分页**：底部添加分页组件
- **筛选和排序**：顶部添加筛选和排序控件

### 5.3 详情页面
- **布局**：使用 `max-w-4xl mx-auto p-4` 限制内容宽度
- **标题区域**：页面顶部显示标题和操作按钮
- **内容区域**：使用卡片或容器组织内容
- **相关内容**：底部或侧边显示相关内容

### 5.4 表单页面
- **布局**：表单元素垂直排列，使用 `max-w-2xl mx-auto` 限制宽度
- **分组**：相关表单字段使用卡片或 `div` 分组
- **按钮区域**：表单底部使用 `flex justify-end gap-3` 排列按钮

## 6. 动画与过渡

### 6.1 过渡效果
- **颜色过渡**：所有颜色变化使用 `transition-colors duration-200`
- **透明度过渡**：所有透明度变化使用 `transition-opacity duration-200`
- **变换过渡**：所有变换效果使用 `transition-transform duration-200`
- **阴影过渡**：所有阴影变化使用 `transition-shadow duration-200`

### 6.2 动画效果
- **淡入效果**：`animate-fade-in`（自定义动画）
- **脉冲效果**：`animate-pulse`（用于加载状态）
- **弹跳效果**：`animate-bounce`（用于特殊提示）
- **旋转效果**：`animate-spin`（用于加载指示器）

### 6.3 使用原则
- **适度使用**：避免过度动画，只在必要时使用
- **性能优先**：使用CSS动画而非JavaScript动画
- **一致的动画语言**：所有动画使用相同的时长和缓动函数
- **有意义的动画**：动画应增强用户体验，而不是分散注意力

## 7. 深色模式支持

### 7.1 实现方式
- 使用 Tailwind CSS 的 `dark:` 前缀实现深色模式样式
- 使用 CSS 变量管理主题颜色
- 支持系统偏好和手动切换

### 7.2 颜色适配
- **背景色**：从白色过渡到深灰色
- **文本色**：从深色过渡到浅色
- **边框色**：从浅色过渡到深色
- **强调色**：调整饱和度和亮度以适应深色背景

### 7.3 图片处理
- 确保图片在深色模式下仍清晰可见
- 考虑为深色模式提供专门的图片版本
- 使用 `mix-blend-mode` 或 `filter` 调整图片显示效果

## 8. 响应式设计

### 8.1 断点策略
- **移动优先**：设计从移动设备开始
- **渐进增强**：为更大的屏幕添加更多功能和布局
- **内容优先**：确保核心内容在所有设备上都可访问

### 8.2 布局适配
- **小屏幕**：单列布局，简化导航
- **中等屏幕**：双列布局，显示更多内容
- **大屏幕**：多列布局，充分利用屏幕空间

### 8.3 组件适配
- **按钮**：在小屏幕上使用图标按钮节省空间
- **导航**：在小屏幕上使用汉堡菜单
- **表单**：在小屏幕上简化表单，减少必填字段
- **列表**：在小屏幕上简化列表项，显示核心信息

## 9. 代码规范

### 9.1 Tailwind CSS 使用规范
- **工具类顺序**：按功能分组（布局、尺寸、间距、颜色、排版、其他）
- **避免过度嵌套**：尽量保持HTML结构扁平
- **使用 @apply 谨慎**：只在必要时使用 `@apply` 提取重复样式
- **响应式前缀**：按从小到大的顺序使用响应式前缀（sm:, md:, lg:, xl:）

### 9.2 组件设计规范
- **单一职责**：每个组件只负责一个功能
- **可复用性**：设计通用组件，避免特定页面的硬编码
- **Props 设计**：使用清晰的命名和类型定义
- **默认值**：为可选Props提供合理的默认值
- **文档**：为每个组件添加JSDoc注释和使用示例

### 9.3 TypeScript 规范
- **严格类型检查**：启用严格的TypeScript配置
- **接口命名**：使用 PascalCase 命名接口，添加 `I` 前缀（可选）
- **类型定义**：为所有组件Props和状态定义类型
- **避免 any 类型**：尽量使用具体类型，只在必要时使用 any

## 10. 最佳实践

### 10.1 性能优化
- **懒加载**：图片和组件使用懒加载
- **代码分割**：按路由或功能分割代码
- **优化动画**：使用CSS动画，避免JavaScript动画
- **减少重绘和回流**：避免频繁DOM操作

### 10.2 可访问性
- **语义化HTML**：使用适当的HTML标签
- **ARIA属性**：为自定义组件添加适当的ARIA属性
- **键盘导航**：确保所有功能可通过键盘访问
- **颜色对比度**：确保文本和背景色对比度符合WCAG标准
- **字体大小**：确保文本大小可调整

### 10.3 测试
- **视觉回归测试**：使用工具检测视觉变化
- **交互测试**：测试所有交互功能
- **响应式测试**：在不同设备和屏幕尺寸上测试
- **性能测试**：定期测试应用性能

## 11. 组件库

### 11.1 现有组件
| 组件名称 | 文件路径 | 用途 |
|---------|---------|------|
| `ChatInput` | `src/components/ChatInput.tsx` | 聊天输入框 |
| `MessageItem` | `src/components/MessageItem.tsx` | AI助手消息 |
| `UserMessageItem` | `src/components/UserMessageItem.tsx` | 用户消息 |
| `MarkdownRenderer` | `src/components/MarkdownRenderer.tsx` | Markdown渲染 |
| `EventForm` | `src/components/EventForm.tsx` | 事件表单 |
| `EventList` | `src/components/EventList.tsx` | 事件列表 |
| `EventDetail` | `src/components/EventDetail.tsx` | 事件详情 |

### 11.2 组件开发流程
1. **设计**：与设计师协作确定组件设计
2. **开发**：按照样式指南开发组件
3. **测试**：测试组件在不同场景下的表现
4. **文档**：为组件添加详细文档和使用示例
5. **审核**：由团队成员审核组件代码和设计
6. **发布**：将组件添加到组件库中

## 12. 版本控制与更新

### 12.1 版本号规则
- 使用语义化版本号（MAJOR.MINOR.PATCH）
- **MAJOR**：不兼容的API变更
- **MINOR**：向后兼容的功能添加
- **PATCH**：向后兼容的bug修复

### 12.2 更新流程
1. **提出变更**：在团队会议或Issue中提出样式指南变更
2. **讨论和批准**：团队讨论并批准变更
3. **更新文档**：修改样式指南文档
4. **更新代码**：根据新的样式指南更新现有代码
5. **测试**：确保所有组件仍正常工作
6. **发布**：发布更新后的样式指南

## 13. 结论

本样式指南为整个应用提供了统一的设计框架和开发规范。遵循这些规范可以确保应用在视觉上保持一致，提高用户体验，同时提高开发效率和代码可维护性。

样式指南是一个动态文档，应随着应用的发展和设计趋势的变化而定期更新。团队成员应定期 review 样式指南，并提出改进建议。

通过共同遵守和维护这个样式指南，我们可以构建一个美观、易用、高效和可维护的应用。